{
  "version": 3,
  "sources": ["../../@lexical/react/LexicalClearEditorPlugin.dev.mjs"],
  "sourcesContent": ["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nimport { useLexicalComposerContext } from '@lexical/react/LexicalComposerContext';\nimport { CLEAR_EDITOR_COMMAND, $getRoot, $getSelection, $createParagraphNode, $isRangeSelection, COMMAND_PRIORITY_EDITOR } from 'lexical';\nimport { useLayoutEffect, useEffect } from 'react';\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nconst CAN_USE_DOM = typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined';\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\n\n// This workaround is no longer necessary in React 19,\n// but we currently support React >=17.x\n// https://github.com/facebook/react/pull/26395\nconst useLayoutEffectImpl = CAN_USE_DOM ? useLayoutEffect : useEffect;\n\n/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n */\n\nfunction ClearEditorPlugin({\n  onClear\n}) {\n  const [editor] = useLexicalComposerContext();\n  useLayoutEffectImpl(() => {\n    return editor.registerCommand(CLEAR_EDITOR_COMMAND, payload => {\n      editor.update(() => {\n        if (onClear == null) {\n          const root = $getRoot();\n          const selection = $getSelection();\n          const paragraph = $createParagraphNode();\n          root.clear();\n          root.append(paragraph);\n          if (selection !== null) {\n            paragraph.select();\n          }\n          if ($isRangeSelection(selection)) {\n            selection.format = 0;\n          }\n        } else {\n          onClear();\n        }\n      });\n      return true;\n    }, COMMAND_PRIORITY_EDITOR);\n  }, [editor, onClear]);\n  return null;\n}\n\nexport { ClearEditorPlugin };\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;AAUA,mBAA2C;AAU3C,IAAM,cAAc,OAAO,WAAW,eAAe,OAAO,OAAO,aAAa,eAAe,OAAO,OAAO,SAAS,kBAAkB;AAcxI,IAAM,sBAAsB,cAAc,+BAAkB;AAU5D,SAAS,kBAAkB;AAAA,EACzB;AACF,GAAG;AACD,QAAM,CAAC,MAAM,IAAI,0BAA0B;AAC3C,sBAAoB,MAAM;AACxB,WAAO,OAAO,gBAAgB,sBAAsB,aAAW;AAC7D,aAAO,OAAO,MAAM;AAClB,YAAI,WAAW,MAAM;AACnB,gBAAM,OAAO,SAAS;AACtB,gBAAM,YAAY,cAAc;AAChC,gBAAM,YAAY,qBAAqB;AACvC,eAAK,MAAM;AACX,eAAK,OAAO,SAAS;AACrB,cAAI,cAAc,MAAM;AACtB,sBAAU,OAAO;AAAA,UACnB;AACA,cAAI,kBAAkB,SAAS,GAAG;AAChC,sBAAU,SAAS;AAAA,UACrB;AAAA,QACF,OAAO;AACL,kBAAQ;AAAA,QACV;AAAA,MACF,CAAC;AACD,aAAO;AAAA,IACT,GAAG,uBAAuB;AAAA,EAC5B,GAAG,CAAC,QAAQ,OAAO,CAAC;AACpB,SAAO;AACT;",
  "names": []
}
